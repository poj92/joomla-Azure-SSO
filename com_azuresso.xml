<?xml version="1.0" encoding="utf-8"?>
<extension type="component" version="5.0" method="upgrade">
  <name>com_azuresso</name>
  <author>PeterPan IT Solutions</author>
  <creationDate>2025-12-01</creationDate>
  <version>0.1.0</version>
  <description>Azure (Entra) OpenID Connect SSO for Joomla 5</description>
  <license>GPL-2.0-or-later</license>

  <namespace path="src">Joomla\Component\Azuresso</namespace>

  <files folder="site">
    <filename>azuresso.php</filename>
    <filename>index.html</filename>
    <folder>src</folder>
  </files>

  <administration>
    <menu>Azure SSO</menu>
    <files folder="admin">
      <filename>azuresso.php</filename>
      <filename>index.html</filename>
      <folder>src</folder>
      <folder>views</folder>
    </files>
  </administration>

  <config>
    <fields name="params">
      <fieldset name="basic">
        <field name="client_id" type="text" label="Client ID" description="Azure App (Client) ID" />
        <field name="client_secret" type="password" label="Client Secret" description="Client secret from Azure (store securely)" />
        <field name="tenant" type="text" label="Tenant ID or common" description="Azure Tenant ID (or 'common' for multi-tenant)" />
        <field name="scopes" type="text" default="openid profile email" label="Scopes" description="Space-separated scopes (e.g. 'openid profile email')" />
        <field name="auto_provision" type="radio" default="1" label="Auto provision users" description="Create Joomla users automatically if they don't exist">
          <option value="1">Yes</option>
          <option value="0">No</option>
        </field>
        <field name="default_user_group" type="text" default="Registered" label="Default user group" description="Group name to use when auto-provisioning users" />
        <field name="allow_existing_only" type="radio" default="0" label="Require existing Joomla users" description="If enabled, only users already in Joomla can sign in">
          <option value="0">No</option>
          <option value="1">Yes</option>
        </field>
        <field name="logout_redirect" type="text" label="Post logout redirect URL" description="URL to redirect users to after logout (optional)" />
      </fieldset>
    </fields>
  </config>

</extension>